<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leaderboard — QuickSmart Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/theme.css">
</head>
<body class="bg-light">

  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/">
        <svg width="36" height="36" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" class="rounded-circle p-1 bg-white shadow-sm">
          <g fill="#0F4C5C"><circle cx="20" cy="26" r="8"/><circle cx="44" cy="26" r="8"/><path d="M16,42c6,4 32,4 40,0v4H16z"/></g>
        </svg>
        <span class="h6 mb-0 text-dark fw-bold">QUICKSMART QUIZ</span>
      </a>
      <div class="ms-auto d-flex gap-2 align-items-center">
        <a href="/quiz.html" class="btn btn-primary btn-sm rounded-pill px-3">PLAY QUIZ</a>
        <a id="logoutBtn" class="btn btn-outline-danger btn-sm rounded-pill px-3">LOG OUT</a>
      </div>
    </div>
  </nav>

  <main class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card theme-card shadow-sm">
          <div class="card-body p-4">
            <h3 class="mb-3">Leaderboard — Top 10</h3>
            <ol id="leaderboardList" class="list-group list-group-numbered"></ol>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/api.js"></script>
  <script src="/js/uiAuth.js"></script>
  <script src="/js/authCheck.js"></script>
  <script>
    // simple load leaderboard using apiFetch
    async function loadLB(){
      const res = await apiFetch('/api/leaderboard');
      if (!res) return; // apiFetch handled redirect on 401
      if (!res.ok) return document.getElementById('leaderboardList').innerHTML = '<li class="list-group-item">Could not load leaderboard</li>';
      const j = await res.json();
      const list = document.getElementById('leaderboardList');
      list.innerHTML = '';
      j.leaderboard.forEach(u=>{
        const el = document.createElement('li');
        el.className = 'list-group-item d-flex justify-content-between align-items-start';
        el.innerHTML = `<div><strong>${u.username}</strong></div><span class="badge bg-success rounded-pill">${u.bestScore}</span>`;
        list.appendChild(el);
      });
    }
    loadLB();
  </script>
</body>
</html>
